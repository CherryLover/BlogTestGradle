/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
println(" I'm first line in build.gradle ")

task hello {
    group('demo-run')
    doLast {
        println(" hello world")
    }
}

task "tryRun" {
    group("demo-run")
    dependsOn("hello")
    println(" you are in configuration")

    doLast {
        println("You run me! in Last")
    }

    doFirst {
        println(" You run me in First")
    }.doFirst {
        println(" You run me in 2nd First")
    }
}

class UserInfo {
    String userName
    String avatar
    int age

    String toString(){
        return "userName：" + getUserName() + " avatar：" + getAvatar() + " age：" + getAge()
    }
}

class GreetingPlugin implements Plugin<Project> {
    void apply(Project project) {
        def userInfo = project.extensions.create("userInfo", UserInfo)
        project.task('helloPlugin') {
            doLast {
                println userInfo.toString()
                println 'Hello from the GreetingPlugin'
            }
        }
    }
}


apply plugin: GreetingPlugin


userInfo {
    userName = 'little monster'
    avatar = "no avatar"
    age = 20
}